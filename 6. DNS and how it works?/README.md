# DNS и как оно работает?

DNS, или Domain Name System, представляет собой распределенную систему для преобразования удобочитаемых доменных имен в числовые IP-адреса, которые компьютеры используют для идентификации друг друга в сети. Эта технология делает Интернет более доступным для людей, так как позволяет использовать человекупонятные доменные имена вместо трудно запоминаемых числовых адресов.

- [Что такое DNS?](#что-такое-dns)
- [Какие типы DNS-запросов бывают?](#какие-типы-dns-запросов-бывают)
- [Как работает DNS?](#как-работает-dns)
- [Заключение](#заключение)

## Что такое DNS?

*DNS (Domain Name System) - это фундаментальная часть Интернета, обеспечивающая преобразование человеко-читаемых доменных имен в IP-адреса, необходимые для идентификации компьютеров и устройств в сети.*

Без DNS мы были бы вынуждены запоминать длинные последовательности чисел вместо удобных доменных имен, что сделало бы работу в Интернете гораздо менее удобной. Каждое устройство, подключенное к Интернету, имеет уникальный IP-адрес, который другие машины используют для поиска устройств. DNS-сервера избавляют людей от необходимости запоминать IP-адреса, такие как **192.168.1.1** (в IPv4), или более сложные новые буквенно-цифровые IP-адреса в IPv6.

## Какие типы DNS-запросов бывают?

При типичном поиске DNS возникают три этапа запросов. Используя комбинацию этих запросов, оптимизированный процесс разрушения DNS может привести к сокращению пройденного расстояния. В идеальной ситуации данные кэшированных записей будут доступны, что позволит DNS-серверу имен возвращать нерекурсивный запрос. Ниже представлены типы DNS-запросов:
- **Рекурсивный запрос:** В рекурсивном запросе DNS-клиент требует, чтобы DNS-сервер (обычно рекурсивный преобразователь DNS) ответил клиенту либо запрошенной записью ресурса, либо сообщением об ошибке, если преобразователь не может найти запись.
- **Итеративный запрос:** В этой ситуации DNS-клиент позволит DNS-серверу вернуть лучший ответ, который он может. Если запрашиваемый DNS-сервер не соответствует имени запроса, он вернет ссылку на DNS-сервер, уполномоченный на более низкий уровень пространства имен домена. Затем DNS-клиент выполнит запрос к реферальному адресу. Этот процесс продолжается с дополнительными DNS-серверами в цепочке запросов до тех пор, пока не произойдет ошибка или не произойдет истечение времени ожидания.
- **Нерекурсивный запрос:** Обычно это происходит, когда клиент преобразователя DNS запрашивает у DNS-сервера запись, к которой у него есть доступ, либо потому, что он является авторитетным для записи, либо потому, что запись существует внутри его кэша. Обычно DNS-сервер кэширует DNS-записи, чтобы предотвратить дополнительное потребление полосы пропускания и нагрузку на вышестоящие серверы.

## Как работает DNS?

1. **Запрос от пользователя**
    Весь процесс начинается, когда пользователь вводит веб-адрес в адресную строку браузера. Например, если пользователь вводит **`www.example.com`**, браузер должен определить соответствующий IP-адрес для этого домена.
2. **Локальный DNS-кэш**
    Первым делом браузер проверяет свой локальный DNS-кэш. Если пользователь ранее посещал сайт **`www.example.com`**, и соответствующая запись все еще актуальна, браузер может получить IP-адрес из своего кэша и пропустить остальные этапы.
3. **Запрос к ресурсу**
    Если запрошенный домен не найден в локальном кэше браузера или информация в кэше устарела, браузер отправляет DNS-запрос к DNS-серверу. Обычно этот DNS-сервер предоставляется интернет-провайдером пользователя.
4. **Рекурсивный DNS-запрос**
    DNS-сервер, получив запрос, начинает рекурсивный процесс. Он может иметь информацию в своем кэше или начать запрос уровнем выше. Если DNS-сервер не имеет IP-адреса для запрашиваемого домена, он обращается к корневым DNS-серверам.
5. **Распределенная структура**
    DNS имеет распределенную иерархическую структуру. Корневые DNS-серверы - первый уровень - указывают на серверы верхнего уровня (TLD), такие как **`.com`**, **`.org`**. Серверы TLD в свою очередь указывают на авторитетные DNS-серверы для конкретных доменов.
6. **Авторитетный DNS-сервер**
    Авторитетный DNS-сервер - это сервер, ответственный за конкретный домен. Он содержит актуальные записи для этого домена и возвращает IP-адрес в ответ на запрос.
7. **Ответ пользователю**
    Получив IP-адрес от авторитетного DNS-сервера, локальный DNS-сервер возвращает его браузеру. Теперь браузер может использовать этот IP-адрес для установления соединения с веб-сервером, где размещен нужный контент.
8. **Кэширование результатов**
    Полученная информация может быть временно сохранена в локальном DNS-кэше для будущих запросов, что снижает время разрешения DNS при повторных посещениях одного и того же домена.

## Заключение

DNS обеспечивает эффективное преобразование доменных имен в IP-адреса, делая Интернет более удобным и понятным для пользователей. Точное понимание этого процесса позволяет веб-разработчикам и администраторам сети эффективно управлять сетевой инфраструктурой и обеспечивать бесперебойную работу веб-приложений.